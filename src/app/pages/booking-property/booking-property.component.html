<section class="light-background">
    <div class="container mt-10 aos-init">
        <div class="section-title" data-aos="fade-up">
            <h2>Book a Visit</h2>
            <p>Find your dream property from our wide range of listings.</p>
        </div>

        <div class="row">
            <!-- Property Details -->
            <div class="col-md-6">
                <div class="info-box">
                    <h3>Property Details</h3>
                    <div *ngIf="property" class="mb-4">
                        <div id="propertyImagesCarousel" class="carousel slide" data-bs-ride="carousel">
                            <div class="carousel-inner">
                                <div class="carousel-item" *ngFor="let image of property?.images; let i = index" 
                                    [class.active]="i === 0">
                                    <img [src]="image" loading="lazy" class="d-block w-100" alt="Property Image">
                                </div>
                            </div>
                            <button class="carousel-control-prev" type="button" data-bs-target="#propertyImagesCarousel"
                                data-bs-slide="prev">
                                <span class="carousel-control-prev-icon"></span>
                                <span class="visually-hidden">Previous</span>
                            </button>
                            <button class="carousel-control-next" type="button" data-bs-target="#propertyImagesCarousel"
                                data-bs-slide="next">
                                <span class="carousel-control-next-icon"></span>
                                <span class="visually-hidden">Next</span>
                            </button>
                        </div>
                        <div class="mt-4">
                            <h3 class="mt-3">{{ property?.title }}</h3>
                            <p>{{ property?.description }}</p>
                            <div class="price">
                                <span class="currency">$</span>
                                <span class="amount">{{ property?.price }}</span>
                                <span class="period">/month</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Booking Steps -->
            <div class="col-md-6">
                <div class="booking-card">
                    <!-- Step Navigation -->
                    <div class="col-md-8 mx-auto">
                        <ul class="nav nav-pills justify-content-center mb-4 text-center">
                            <li class="nav-item">
                                <a class="nav-link" [class.active]="currentStep === 1" (click)="currentStep = 1">1</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" [class.active]="currentStep === 2" (click)="currentStep = 2">2</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" [class.active]="currentStep === 3" (click)="currentStep = 3">3</a>
                            </li>
                        </ul>
                    </div>

                    <!-- Step 1: User Details -->
                    <div *ngIf="currentStep === 1">
                        <form>
                            <h4>User Details</h4>
                            <div class="mb-3">
                                <label for="name">Name</label>
                                <input id="name" type="text" class="form-control" [(ngModel)]="bookingData.name"
                                    name="name" required>
                            </div>
                            <div class="mb-3">
                                <label for="email">Email</label>
                                <input id="email" type="email" class="form-control" [(ngModel)]="bookingData.email"
                                    name="email" required>
                            </div>
                            <div class="mb-3">
                                <label for="phone">Phone</label>
                                <input id="phone" type="tel" class="form-control" [(ngModel)]="bookingData.phone"
                                    name="phone" required>
                            </div>
                            <button type="button" class="btn next-btn" (click)="nextStep()">Next</button>
                        </form>
                    </div>

                    <!-- Step 2: Date & Time -->
                    <div *ngIf="currentStep === 2">
                        <h3>Select Date & Time</h3>
                        <form>
                            <div class="row">
                                <div class="col-md-6">
                                    <label for="date">Date</label>
                                    <input id="date" type="date" class="form-control" [(ngModel)]="bookingData.date"
                                        name="date" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="time">Time</label>
                                    <input id="time" type="time" class="form-control" [(ngModel)]="bookingData.time"
                                        name="time" required>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button type="button" class="btn prev-btn me-2" (click)="previousStep()">Back</button>
                                <button type="button" class="btn next-btn" (click)="nextStep()">Next</button>
                            </div>
                        </form>
                    </div>

                    <!-- Step 3: Confirmation -->
                    <div *ngIf="currentStep === 3">
                        <h3>Confirm Booking</h3>
                        <p><strong>Property:</strong> {{ property?.title }}</p>
                        <p><strong>Name:</strong> {{ bookingData.name }}</p>
                        <p><strong>Email:</strong> {{ bookingData.email }}</p>
                        <p><strong>Phone:</strong> {{ bookingData.phone }}</p>
                        <p><strong>Date:</strong> {{ bookingData.date }}</p>
                        <p><strong>Time:</strong> {{ bookingData.time }}</p>
                        <p><strong>Total:</strong> ${{ bookingData.total }}</p>
                        <div class="mt-5">
                            <button type="button" class="btn prev-btn me-2" (click)="previousStep()">Back</button>
                            <button type="button" class="btn submit-btn" (click)="confirmBooking()">Confirm</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
